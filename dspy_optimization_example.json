{
  "description": "Example DSPy optimization artifact showing the learned prompting structure",
  "signature": "StringSignature(specialty, condition -> reasoning, template\n    instructions='Generate medical eConsult template optimized for COMPREHENSIVENESS and CONCISENESS with physician-validated best practices'\n    specialty = Field(annotation=str required=True json_schema_extra={'desc': 'Medical specialty (e.g., cardiology, neurology, endocrinology)', '__dspy_field_type': 'input', 'prefix': 'Specialty:'})\n    condition = Field(annotation=str required=True json_schema_extra={'desc': 'Medical condition being consulted about', '__dspy_field_type': 'input', 'prefix': 'Condition:'})\n    reasoning = Field(annotation=str required=True json_schema_extra={'prefix': \"Reasoning: Let's think step by step in order to\", 'desc': '${reasoning}', '__dspy_field_type': 'output'})\n    template = Field(annotation=str required=True json_schema_extra={'desc': 'Complete JSON template following Stanford format with physician-validated best practices:\\n\\nCOMPREHENSIVE CLINICAL ASSESSMENT PRINCIPLES:\\n1. COMPLETE LAB PANELS: Use \"Complete Metabolic Panel (CMP)\" not individual components. Include timing like \"within last 6 months\"\\n2. FULL MEDICATION HISTORY: \"All current medications, supplements, OTC drugs with dosage, frequency, adherence, duration, recent changes\"  \\n3. THOROUGH SYMPTOMS: Include associated symptoms, severity, frequency, triggers, physical exam findings\\n4. BALANCED SPECIFICITY: Avoid over-narrowing (use \"family history of cardiac disease\" not just \"MI\")\\n5. PRACTICAL TIMEFRAMES: Include relevant timing (\"within past year\", \"while on current therapy\")\\n\\nPRIORITIZE: 1) COMPREHENSIVE coverage of essential clinical elements, 2) CONCISE expression (avoid verbose >20 words), 3) Clinical utility for specialist consultation. Clinical pearls optional.', 'format': 'JSON array with clinical question, assessment fields (Required/Optional), and diagnostic fields (Required/Optional)', '__dspy_field_type': 'output', 'prefix': 'Template:'})\n)",
  "demo_count": 5,
  "actual_prompt": null,
  "demos": [
    {
      "specialty": "rheumatology",
      "condition": "inflammatory_back_pain",
      "template": "[\n  {\n    \"My Clinical Question (condition: inflammatory back pain)\": \"***\"\n  },\n  {\n    \"My most current assessment of this problem can be found in the note dated\": \"{Today/***}\"\n  },\n  {\n    \"In your clinical question, or current note, please include information on\": {\n      \"Assessments\": {\n        \"Required\": [\n          {\n            \"Duration of symptoms\": \"***\"\n          },\n          {\n            \"Age of onset\": \"***\"\n          },\n          {\n            \"Location and radiation of pain\": \"***\"\n          },\n          {\n            \"Pattern of pain (e.g., morning stiffness, improvement with exercise)\": \"***\"\n          },\n          {\n            \"Associated symptoms (e.g., psoriasis, uveitis, enthesitis)\": \"***\"\n          },\n          {\n            \"Family history of inflammatory back disease\": \"***\"\n          },\n          {\n            \"Previous treatment for inflammatory back pain (including medications and dosages)\": \"***\"\n          },\n          {\n            \"Current medications (including dosages and adherence)\": \"***\"\n          },\n          {\n            \"Physical examination findings (including tenderness, swelling, range of motion)\": \"***\"\n          }\n        ],\n        \"Optional\": []\n      },\n      \"Diagnostics\": {\n        \"Required\": [\n          {\n            \"Complete Blood Count (CBC)\": \"***\"\n          },\n          {\n            \"Erythrocyte Sedimentation Rate (ESR)\": \"***\"\n          },\n          {\n            \"C-Reactive Protein (CRP)\": \"***\"\n          },\n          {\n            \"HLA-B27\": \"***\"\n          },\n          {\n            \"Radiographs of the spine and sacroiliac joints\": \"***\"\n          }\n        ],\n        \"Optional\": [\n          {\n            \"Magnetic Resonance Imaging (MRI) of the spine and sacroiliac joints\": \"***\"\n          },\n          {\n            \"Ultrasound of the spine and sacroiliac joints\": \"***\"\n          }\n        ]\n      }\n    }\n  }\n]"
    },
    {
      "specialty": "nephrology",
      "condition": "proteinuria",
      "template": "[\n  {\n    \"My Clinical Question (condition: proteinuria)\": \"***\"\n  },\n  {\n    \"My most current assessment of this problem can be found in the note dated\": \"{Today/***}\"\n  },\n  {\n    \"In your clinical question, or current note, please include information on\": {\n      \"Assessments\": {\n        \"Required\": [],\n        \"Optional\": [\n          {\n            \"Does the patient exercise heavily?\": \"***\"\n          },\n          {\n            \"Does the patient have any edema? If yes, where is the edema?\": \"***\"\n          },\n          {\n            \"Does the patient have any known/previously diagnosed kidney disease?\": \"***\"\n          },\n          {\n            \"Does the patient have any of the following chronic conditions: Hypertension, Diabetes mellitus, Hyperlipidemia, Chronic inflammatory condition (such as SLE or RA)\": \"***\"\n          },\n          {\n            \"Has the patient had a recent febrile illness?\": \"***\"\n          }\n        ]\n      },\n      \"Diagnostics\": {\n        \"Required\": [\n          {\n            \"Basic Metabolic Panel (BMP)\": \"***\"\n          },\n          {\n            \"Kidney Ultrasound (Renal Ultrasound)\": \"***\"\n          },\n          {\n            \"Urine Albumin\": \"***\"\n          },\n          {\n            \"Urinalysis with Microscopy\": \"***\"\n          },\n          {\n            \"Spot prot/creat ratio (or 24-hour urine protein and creatinine)\": \"***\"\n          },\n          {\n            \"Complete Blood Count (CBC)\": \"***\"\n          }\n        ],\n        \"Optional\": [\n          {\n            \"HBV\": \"***\"\n          },\n          {\n            \"HCV\": \"***\"\n          },\n          {\n            \"Hemoglobin A1c (HbA1c)\": \"***\"\n          },\n          {\n            \"HIV\": \"***\"\n          },\n          {\n            \"SPEP (If patient is at risk of monoclonal gammopathy)\": \"***\"\n          },\n          {\n            \"UPEP (If patient is at risk of monoclonal gammopathy)\": \"***\"\n          },\n          {\n            \"Serum free light chain ratio (If patient is at risk of monoclonal gammopathy)\": \"***\"\n          }\n        ]\n      }\n    }\n  }\n]"
    },
    {
      "specialty": "hematology",
      "condition": "elevated_ferritin",
      "template": "[\n  {\n    \"My Clinical Question (condition: elevated ferritin)\": \"***\"\n  },\n  {\n    \"My most current assessment of this problem can be found in the note dated\": \"{Today/***}\"\n  },\n  {\n    \"In your clinical question, or current note, please include information on\": {\n      \"Assessments\": {\n        \"Required\": [\n          {\n            \"Family history of iron overload\": \"{yes/no}\"\n          },\n          {\n            \"EtOH use\": \"***\"\n          },\n          {\n            \"Documented exam for hepatosplenomegaly (otherwise an abdominal US should be considered if there is no recent cross-sectional imaging in the past year)\": \"***\"\n          }\n        ],\n        \"Optional\": []\n      },\n      \"Diagnostics\": {\n        \"Required\": [\n          {\n            \"CBC with differential (on two consecutive checks at least one week apart)\": \"***\"\n          },\n          {\n            \"CMP\": \"***\"\n          },\n          {\n            \"Ferritin (fasting and at baseline health)\": \"***\"\n          },\n          {\n            \"Transferrin saturation (fasting and at baseline health)\": \"***\"\n          },\n          {\n            \"ESR\": \"***\"\n          },\n          {\n            \"CRP\": \"***\"\n          },\n          {\n            \"HFE mutation screening\": \"***\"\n          },\n          {\n            \"Comprehensive hepatitis panel\": \"***\"\n          }\n        ],\n        \"Optional\": []\n      }\n    }\n  }\n]"
    }
  ],
  "explanation": {
    "signature": "The DSPy signature defines the input/output structure and includes optimized instructions",
    "demos": "Few-shot examples learned during optimization process, showing specialty-condition pairs with their corresponding templates",
    "optimization_process": "DSPy automatically optimized these examples and instructions based on training data performance",
    "clinical_principles": "The instructions encode clinical best practices learned during optimization, including comprehensive lab panels, medication history, and timeframes"
  }
}